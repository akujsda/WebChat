(this.webpackJsonpclientchat=this.webpackJsonpclientchat||[]).push([[0],{200:function(e,n,t){},201:function(e,n,t){},321:function(e,n,t){"use strict";t.r(n);var a=t(3),r=t(0),i=t.n(r),c=t(19),s=t.n(c),o=(t(200),t(201),t(31)),u=t(66),l=t(21),d="/",j="/login",b="/register",p="/chat",m=t(51),x=t.n(m),h=t(72),f=t(30),O=t(365),g=t(364),v=t(358),w=t(361),I=t(360),y=t(359),S=t(112),k=t.n(S),C=t(327),N=t(353),T=t(356),E=t(43),B=t(64),F=t.n(B);function q(){var e=Object(E.a)(["\n  mutation userSignIn($input: UserSignInInput!){\n    userSignIn(input: $input){\n      id\n      userName\n      token\n    }\n  }\n"]);return q=function(){return e},e}function M(){var e=Object(E.a)(["\n  mutation createUser($input: NewUser!){\n    createUser(input: $input){\n      name\n      email\n      id\n    }\n  }\n"]);return M=function(){return e},e}var A=F()(M()),P=F()(q()),W=t(46),z=t(63),V=t(41),$=t(76),H=t.n($),L=t(25),U=t.n(L),_=t(38),Z=(t(124),t(355)),D={email:"",password:""},R=V.a().shape({email:V.b().required().matches(/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/),password:V.b().required().min(6)}),G=Object(N.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function J(){var e=G(),n=Object(l.e)(),t=Object(W.a)(P),i=Object(f.a)(t,1)[0],c=Object(Z.a)().messages,s=function(){var e=Object(h.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.errors.email||t.errors.password){e.next=11;break}return e.prev=1,e.next=4,i({variables:{input:{email:t.values.email,password:t.values.password}}}).then((function(e){H()(e,"data.userSignIn")&&(U.a.set("userId",H()(e,"data.userSignIn.id")),U.a.set("userName",H()(e,"data.userSignIn.userName")),U.a.set("token",H()(e,"data.userSignIn.token")),n.push(p))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),_.b.error("".concat(c.incorrectEmail),{position:_.b.POSITION.BOTTOM_RIGHT});case 9:e.next=12;break;case 11:_.b.error("".concat(c.incorrectEmail),{position:_.b.POSITION.BOTTOM_RIGHT});case 12:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(z.b,{onSubmit:function(e){return console.log(e)},initialValues:D,validationSchema:R,component:function(n){return Object(a.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(v.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(O.a,{className:e.avatar,children:Object(a.jsx)(k.a,{})}),Object(a.jsx)(C.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(a.jsx)(w.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"".concat(c.emailLong),name:"email",autoComplete:"new-password",inputProps:{form:{autocomplete:"off"}},onChange:function(){return function(e){var n=document.getElementById("email");n&&e.setFieldValue("email",n.value)}(n)},autoFocus:!0}),Object(a.jsx)(w.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:function(){return function(e){var n=document.getElementById("password");n&&e.setFieldValue("password",n.value)}(n)},autoComplete:"new-password"}),Object(a.jsx)(g.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){return s(n)},children:"".concat(c.signIn)}),Object(a.jsx)(y.a,{container:!0,children:Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(I.a,{href:b,variant:"body2",children:"".concat(c.dontHaveAccount)})})})]})]})]})}}),Object(a.jsx)(_.a,{})]})}var K={email:"",password:"",name:""},Q=V.a().shape({email:V.b().required().matches(/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/),password:V.b().required().min(6),name:V.b().required()}),X=Object(N.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function Y(){var e=X(),n=Object(W.a)(A),t=Object(f.a)(n,1)[0],i=Object(l.e)(),c=Object(Z.a)().messages,s=function(){var e=Object(h.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.errors.email||n.errors.name||n.errors.password){e.next=13;break}return e.prev=1,e.next=4,t({variables:{input:{email:n.values.email,name:n.values.name,password:n.values.password}}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.prev=8,i.push(j),e.finish(8);case 11:e.next=14;break;case 13:_.b.error("".concat(c.incorrectEmail),{position:_.b.POSITION.BOTTOM_RIGHT});case 14:case"end":return e.stop()}}),e,null,[[1,6,8,11]])})));return function(n){return e.apply(this,arguments)}}();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(z.b,{onSubmit:function(){return t()},initialValues:K,validationSchema:Q,component:function(n){return Object(a.jsxs)(T.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(v.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(O.a,{className:e.avatar,children:Object(a.jsx)(k.a,{})}),Object(a.jsx)(C.a,{component:"h1",variant:"h5",children:"".concat(c.signUp)}),Object(a.jsxs)(z.a,{id:"test",className:e.form,children:[Object(a.jsxs)(y.a,{container:!0,spacing:2,children:[Object(a.jsx)(y.a,{item:!0,xs:12,children:Object(a.jsx)(w.a,{name:"name",variant:"outlined",required:!0,fullWidth:!0,id:"name",label:"".concat(c.name),autoFocus:!0,onBlur:function(){return function(e){var n=document.getElementById("name");n&&e.setFieldValue("name",n.value)}(n)},autoComplete:"new-password"})}),Object(a.jsx)(y.a,{item:!0,xs:12,children:Object(a.jsx)(w.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"".concat(c.emailLong),name:"email",onBlur:function(){return function(e){var n=document.getElementById("email");n&&e.setFieldValue("email",n.value)}(n)},autoComplete:"new-password"})}),Object(a.jsx)(y.a,{item:!0,xs:12,children:Object(a.jsx)(w.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"".concat(c.password),type:"password",id:"password",onBlur:function(){return function(e){var n=document.getElementById("password");n&&e.setFieldValue("password",n.value)}(n)},autoComplete:"new-password"})})]}),Object(a.jsx)(g.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){return s(n)},children:"".concat(c.signUp)}),Object(a.jsx)(y.a,{container:!0,justify:"flex-end",children:Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(I.a,{href:j,variant:"body2",children:"".concat(c.alreadyHaveAccount)})})})]})]})]})}}),Object(a.jsx)(_.a,{})]})}var ee=t(362),ne=t(39);function te(){var e=Object(E.a)(["\n  subscription{\n    newMessage {\n    text\n    date\n    senderName\n  }\n  }\n\n"]);return te=function(){return e},e}function ae(){var e=Object(E.a)(["\n  query getMessages($senderId: String){\n    getMessages(senderId: $senderId){\n      text\n      senderName\n      date\n    }\n  }\n"]);return ae=function(){return e},e}function re(){var e=Object(E.a)(["\n  mutation sendMessage($input: NewMessage!){\n    sendMessage(input: $input){\n      text\n    }\n  }\n"]);return re=function(){return e},e}var ie=F()(re()),ce=F()(ae()),se=F()(te()),oe=t(90);function ue(){var e=Object(E.a)(["\n  padding-bottom: 10px;\n  padding-top: 10px;\n  border: 1px solid rgb(63, 81, 181);\n  border-radius: 10px;\n  margin-top:10px;\n  margin-bottom:10px;\n"]);return ue=function(){return e},e}function le(){var e=Object(E.a)(["\n  padding-left:10px;\n  padding-right:10px;\n  list-style:none;\n"]);return le=function(){return e},e}var de=oe.a.ul(le()),je=oe.a.li(ue()),be=function(){var e=U.a.get("userId"),n=Object(r.useState)([""]),t=Object(f.a)(n,2),i=t[0],c=t[1],s=Object(W.b)(ce,{variables:{senderId:e}}),o=s.data,u=s.loading;Object(r.useEffect)((function(){c(o.getMessages)}),[u,o]);var l=Object(W.c)(se),d=l.data,j=l.loading;return Object(r.useEffect)((function(){var e=document.getElementById("messageList");if(d&&e){var n=[].concat(Object(ne.a)(i),[d.newMessage]);c(n),e.scrollTop=e.scrollHeight}}),[j,d]),Object(a.jsx)(ee.a,{width:"100vw",height:"70vh",id:"messageList",overflow:"scroll",children:Object(a.jsx)(de,{children:!u&&i&&i.map((function(e,n){return Object(a.jsxs)(je,{children:[Object(a.jsxs)(ee.a,{textAlign:"left",marginLeft:"10px",children:[e.senderName,": "]}),Object(a.jsx)(ee.a,{marginTop:"20px",children:e.text})]},n)}))})})};function pe(){var e=Object(E.a)(["\n  width:300px;\n  border:1px solid #3f51b5;\n  border-radius:5px;\n"]);return pe=function(){return e},e}var me=Object(oe.a)(w.a)(pe()),xe={senderId:"",text:""},he=V.a().shape({text:V.b().required().max(500),senderId:V.b().required()}),fe=function(){var e=Object(W.a)(ie),n=Object(f.a)(e,1)[0],t=U.a.get("userId"),i=U.a.get("userName"),c=function(){var e=Object(h.a)(x.a.mark((function e(a){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.values.text||a.errors.text){e.next=13;break}return e.prev=1,e.next=4,n({variables:{input:{senderId:t,text:a.values.text,senderName:i}}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.prev=8,a.resetForm(),e.finish(8);case 11:e.next=15;break;case 13:_.b.error("Max lenght 500 simbols",{position:_.b.POSITION.BOTTOM_RIGHT}),a.resetForm();case 15:case"end":return e.stop()}}),e,null,[[1,6,8,11]])})));return function(n){return e.apply(this,arguments)}}();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(z.b,{onSubmit:function(){return n()},initialValues:xe,validationSchema:he,component:function(e){return Object(a.jsxs)(ee.a,{width:"300px",height:"150px",position:"sticky",bottom:"120px",children:[Object(a.jsx)(me,{id:"sendMessageInput",required:!0,variant:"outlined",autoComplete:"off",onChange:function(){return function(e){var n=document.getElementById("sendMessageInput");n&&e.setFieldValue("text",n.value)}(e)},inputProps:{autoComplete:"none"}}),Object(a.jsx)(ee.a,{marginTop:"10px",children:Object(a.jsx)(g.a,{variant:"contained",color:"primary",onClick:function(){return c(e)},children:"send "})})]})}}),Object(a.jsx)(_.a,{})]})},Oe=function(){var e=U.a.get("userId"),n=Object(l.e)();return Object(r.useEffect)((function(){!e&&n.push(j)}),[n,e]),Object(a.jsxs)(ee.a,{width:"100vw",height:"90vh",display:"flex",justifyContent:"center",children:[Object(a.jsx)(ee.a,{children:Object(a.jsx)(be,{})}),Object(a.jsx)(ee.a,{position:"fixed",zIndex:"10",bgcolor:"white",bottom:"0",children:Object(a.jsx)(fe,{})})]})},ge=function(){var e=Object(Z.a)().messages,n=Object(l.e)(),t=Object(r.useState)(!1),i=Object(f.a)(t,2),c=i[0],s=i[1],o=Object(r.useState)(!1),u=Object(f.a)(o,2),d=u[0],b=u[1];Object(r.useEffect)((function(){var e=U.a.get("userId");U.a.get("userName")&&e&&(n.push(p),s(!0))}),[n]),Object(r.useEffect)((function(){b(!window.location.href.includes(j))}),[]);return Object(a.jsxs)(ee.a,{width:"100vw",height:"50px",bgcolor:"#3f51b5",display:"flex",justifyContent:"center",alignItems:"center",children:[Object(a.jsxs)(ee.a,{width:"50vw",display:"flex",justifyContent:"flex-start",marginLeft:"10px",fontSize:"32px",color:"white",fontWeight:"500",children:[" ","".concat(e.webChat)," "]}),Object(a.jsx)(ee.a,{display:"flex",justifyContent:"flex-end",width:"50vw",children:d&&Object(a.jsx)(ee.a,{bgcolor:"white",border:"1px solid white",borderRadius:"10px",margin:"5px 10px",height:"40px",textAlign:"center",children:Object(a.jsx)(g.a,{onClick:c?function(){U.a.remove("userId"),U.a.remove("userName"),n.push(j),s(!1)}:function(){s(!0),n.push(j)},color:"primary",children:"".concat(c?e.signOut:e.signIn)})})})]})},ve=function(){return Object(a.jsxs)(u.a,{children:[Object(a.jsx)(l.a,{path:d,children:Object(a.jsx)(ge,{})}),Object(a.jsx)(l.a,{path:j,exact:!0,children:Object(a.jsx)(J,{})}),Object(a.jsx)(l.a,{path:b,exact:!0,children:Object(a.jsx)(Y,{})}),Object(a.jsx)(l.a,{path:p,exact:!0,children:Object(a.jsx)(Oe,{})})]})},we=t(91),Ie=t(33),ye=t(177),Se=t(58),ke=t(174),Ce=t(8),Ne=t(176),Te=t(175),Ee=new ke.a({uri:"ws://18.222.35.142:80/graphql",options:{reconnect:!0,connectionParams:function(){return{autorization:U.a.get("token")?"Bearer ".concat(U.a.get("token")):""}}}}),Be=new ye.a({uri:"http://18.222.35.142:80/graphql"}),Fe=Object(Te.a)((function(e,n){var t=n.headers,a=U.a.get("token");return{headers:Object(we.a)(Object(we.a)({},t),{},{autorization:a?"Bearer ".concat(a):""})}})),qe=Object(Ie.d)((function(e){var n=e.query,t=Object(Ce.j)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),Ee,Fe.concat(Be)),Me=new Se.a({cache:new Ne.a,link:qe}),Ae=t(363),Pe="en-us",We=t(113),ze=Object(We.a)({},Pe,{signIn:"Sign in",signUp:"Sign up",signOut:"Sign out",email:"Email",emailLong:"Email address",password:"Password",name:"Name",alreadyHaveAccount:"Already have an account? Sign in",dontHaveAccount:"Don't have an account? Sign Up",incorrectEmail:"Email or password entered incorrect",webChat:"WebChat"}),Ve=Object(we.a)({},ze),$e=function(e){var n=e.children,t=e.locale,i=void 0===t?Pe:t;return Object(a.jsx)(Ae.a,{locale:i,textComponent:r.Fragment,messages:Ve[i],children:n})};var He=function(){return Object(a.jsx)(o.a,{client:Me,children:Object(a.jsx)($e,{locale:Pe,children:Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(ve,{})})})})},Le=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,368)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),i(e),c(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(He,{})}),document.getElementById("root")),Le()}},[[321,1,2]]]);
//# sourceMappingURL=main.db1f785b.chunk.js.map